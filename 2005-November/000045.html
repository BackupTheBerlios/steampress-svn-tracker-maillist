<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [steampress-svn-tracker] r89 - trunk
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/steampress-svn-tracker/2005-November/index.html" >
   <LINK REL="made" HREF="mailto:steampress-svn-tracker%40lists.berlios.de?Subject=Re%3A%20%5Bsteampress-svn-tracker%5D%20r89%20-%20trunk&In-Reply-To=%3C200511090549.jA95nA0f019806%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000044.html">
   <LINK REL="Next"  HREF="000046.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[steampress-svn-tracker] r89 - trunk</H1>
    <B>steampress-svn-tracker-admin at lists.berlios.de</B> 
    <A HREF="mailto:steampress-svn-tracker%40lists.berlios.de?Subject=Re%3A%20%5Bsteampress-svn-tracker%5D%20r89%20-%20trunk&In-Reply-To=%3C200511090549.jA95nA0f019806%40sheep.berlios.de%3E"
       TITLE="[steampress-svn-tracker] r89 - trunk">steampress-svn-tracker-admin at lists.berlios.de
       </A><BR>
    <I>Wed Nov  9 06:49:10 CET 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000044.html">[steampress-svn-tracker] r88 - trunk
</A></li>
        <LI>Next message: <A HREF="000046.html">[steampress-svn-tracker] r90 - trunk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45">[ date ]</a>
              <a href="thread.html#45">[ thread ]</a>
              <a href="subject.html#45">[ subject ]</a>
              <a href="author.html#45">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: steamedpenguin
Date: 2005-11-09 06:49:07 +0100 (Wed, 09 Nov 2005)
New Revision: 89

Modified:
   trunk/wp-comments-post.php
Log:
Add brackets. Whitespace makes code legible. get rid of 'if (): endif;'

Modified: trunk/wp-comments-post.php
===================================================================
--- trunk/wp-comments-post.php	2005-11-09 05:46:46 UTC (rev 88)
+++ trunk/wp-comments-post.php	2005-11-09 05:49:07 UTC (rev 89)
@@ -5,13 +5,18 @@
 
 $status = $wpdb-&gt;get_row(&quot;SELECT post_status, comment_status FROM $wpdb-&gt;posts WHERE ID = '$comment_post_ID'&quot;);
 
-if ( empty($status-&gt;comment_status) ) {
+if ( empty($status-&gt;comment_status) )
+{
 	do_action('comment_id_not_found', $comment_post_ID);
 	exit;
-} elseif ( 'closed' ==  $status-&gt;comment_status ) {
+}
+elseif ( 'closed' ==  $status-&gt;comment_status )
+{
 	do_action('comment_closed', $comment_post_ID);
 	die( __('Sorry, comments are closed for this item.') );
-} elseif ( 'draft' == $status-&gt;post_status ) {
+}
+elseif ( 'draft' == $status-&gt;post_status )
+{
 	do_action('comment_on_draft', $comment_post_ID);
 	exit;
 }
@@ -23,26 +28,38 @@
 
 // If the user is logged in
 get_currentuserinfo();
-if ( $user_ID ) :
+if ( $user_ID )
+{
 	$comment_author       = addslashes($user_identity);
 	$comment_author_email = addslashes($user_email);
 	$comment_author_url   = addslashes($user_url);
-else :
+}
+else
+{
 	if ( get_option('comment_registration') )
+	{
 		die( __('Sorry, you must be logged in to post a comment.') );
-endif;
+	}
+}
 
 $comment_type = '';
 
-if ( get_settings('require_name_email') &amp;&amp; !$user_ID ) {
+if ( get_settings('require_name_email') &amp;&amp; !$user_ID )
+{
 	if ( 6 &gt; strlen($comment_author_email) || '' == $comment_author )
+	{
 		die( __('Error: please fill the required fields (name, email).') );
+	}
 	elseif ( !is_email($comment_author_email))
+	{
 		die( __('Error: please enter a valid email address.') );
+	}
 }
 
 if ( '' == $comment_content )
+{
 	die( __('Error: please type a comment.') );
+}
 
 $commentdata = compact('comment_post_ID', 'comment_author', 'comment_author_email', 'comment_author_url', 'comment_content', 'comment_type', 'user_ID');
 
@@ -57,7 +74,7 @@
 header('Cache-Control: no-cache, must-revalidate, max-age=0');
 header('Pragma: no-cache');
 
-$location = (empty($_POST['redirect_to'])) ? $_SERVER[&quot;HTTP_REFERER&quot;] : $_POST['redirect_to']; 
+$location = (empty($_POST['redirect_to'])) ? $_SERVER[&quot;HTTP_REFERER&quot;] : $_POST['redirect_to'];
 
 wp_redirect($location);
-?&gt;
\ No newline at end of file
+?&gt;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000044.html">[steampress-svn-tracker] r88 - trunk
</A></li>
	<LI>Next message: <A HREF="000046.html">[steampress-svn-tracker] r90 - trunk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45">[ date ]</a>
              <a href="thread.html#45">[ thread ]</a>
              <a href="subject.html#45">[ subject ]</a>
              <a href="author.html#45">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/steampress-svn-tracker">More information about the steampress-svn-tracker
mailing list</a><br>
</body></html>
